<form method="post" action="{{ url_for('admin.rate_new_modal') }}" class="p-3">
  {% if error %}
    <div class="alert alert-danger py-2">{{ error }}</div>
  {% endif %}

  <div class="mb-3">
    <label class="form-label">Categoria</label>
    {% if categories and categories|length %}
      <select name="category_id" class="form-select" required>
        <option value="" selected disabled>Selecione…</option>
        {% for c in categories %}
          <option value="{{ c.id }}">{{ c.name }}</option>
        {% endfor %}
      </select>
      <div class="form-text">Apenas categorias sem tarifa aparecem aqui.</div>
    {% else %}
      <input class="form-control" value="Não há categorias disponíveis" disabled>
      <div class="form-text text-danger">Todas as categorias já possuem tarifa, ou não há categorias cadastradas.</div>
    {% endif %}
  </div>

  <div class="row g-3">
    <div class="col-md-4">
      <label class="form-label">Moeda</label>
      <input name="currency" class="form-control" value="USD" maxlength="8">
    </div>
    <div class="col-md-4">
      <label class="form-label">Diária</label>
      <input name="daily_rate" type="number" step="0.01" min="0" class="form-control" required>
    </div>
    <div class="col-md-4">
      <label class="form-label">Depósito</label>
      <input name="deposit_amount" type="number" step="0.01" min="0" class="form-control" value="200">
    </div>
  </div>

  <div class="row g-3 mt-0">
    <div class="col-md-4">
      <label class="form-label">Idade mínima</label>
      <input name="min_age" type="number" min="16" max="99" class="form-control" value="21">
    </div>
  </div>

  <div class="d-flex justify-content-end gap-2 mt-4">
    <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancelar</button>
    <button type="submit" class="btn btn-primary" {% if not categories or not categories|length %}disabled{% endif %}>
      Salvar
    </button>
  </div>
</form>
