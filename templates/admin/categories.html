{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3 class="mb-0">Categorias</h3>
  <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('admin.dashboard') }}">Voltar</a>
</div>

<div class="row g-4">
  <div class="col-lg-5">
    <div class="card shadow-sm">
      <div class="card-body">
        <h5 class="card-title">Nova Categoria</h5>
        <form method="post" action="{{ url_for('admin.categories') }}" autocomplete="off">
          <div class="mb-2">
            <label class="form-label">Nome</label>
            <input name="name" class="form-control" required>
          </div>
          <div class="mb-2">
            <label class="form-label">Descrição</label>
            <textarea name="description" class="form-control" rows="2"></textarea>
          </div>

          <div class="row g-2">
            <div class="col-4">
              <label class="form-label">Assentos</label>
              <input name="seats" type="number" class="form-control" value="5" min="1">
            </div>
            <div class="col-8">
              <label class="form-label">Transmissão</label>
              <select name="transmission" class="form-select">
                <option value="Automatic" selected>Automatic</option>
                <option value="Manual">Manual</option>
              </select>
            </div>
          </div>

          <div class="row g-2 mt-2">
            <div class="col-6">
              <label class="form-label">Malas grandes</label>
              <input name="large_bags" type="number" class="form-control" value="1" min="0">
            </div>
            <div class="col-6">
              <label class="form-label">Malas pequenas</label>
              <input name="small_bags" type="number" class="form-control" value="1" min="0">
            </div>
          </div>

          <div class="mt-2">
            <label class="form-label">Quilometragem</label>
            <input name="mileage_text" class="form-control" value="Unlimited mileage">
          </div>

          <div class="mt-3 d-flex gap-2">
            <button class="btn btn-primary">Salvar</button>
            <button type="reset" class="btn btn-light">Limpar</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <div class="col-lg-7">
    <div class="card shadow-sm">
      <div class="card-body">
        <h5 class="card-title">Lista</h5>

        <div class="table-responsive">
          <table class="table align-middle">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Especificações</th>
                <th class="text-end">Ações</th>
              </tr>
            </thead>
            <tbody>
              {% for c in categories %}
              <tr>
                <td class="fw-semibold">{{ c.name }}</td>
                <td class="text-muted small">
                  <i class="bi bi-people me-1"></i>{{ c.seats }} seats
                  <i class="bi bi-diagram-3 ms-3 me-1"></i>{{ c.transmission }}
                  <i class="bi bi-suitcase ms-3 me-1"></i>{{ c.large_bags }} large bag
                  <i class="bi bi-bag ms-3 me-1"></i>{{ c.small_bags }} small bag
                  <i class="bi bi-infinity ms-3 me-1"></i>{{ c.mileage_text or 'Unlimited mileage' }}
                  {% if c.description %}<div class="text-secondary">{{ c.description }}</div>{% endif %}
                </td>
                <td class="text-end">
                  <button type="button"
                          class="btn btn-sm btn-outline-primary me-1"
                          data-bs-toggle="tooltip" title="Editar"
                          data-modal-url="{{ url_for('admin.edit_category_modal', category_id=c.id) }}"
                          data-modal-title="Editar categoria">
                    <i class="bi bi-pencil-square"></i>
                  </button>

                  <form class="d-inline" method="post"
                        action="{{ url_for('admin.delete_category', category_id=c.id) }}"
                        onsubmit="return confirm('Excluir esta categoria?')">
                    <button class="btn btn-sm btn-outline-danger" data-bs-toggle="tooltip" title="Excluir">
                      <i class="bi bi-trash"></i>
                    </button>
                  </form>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>

      </div>
    </div>
  </div>
</div>
{% endblock %}
